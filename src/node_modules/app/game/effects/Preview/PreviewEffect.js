// @flow

import {action, autorun} from "mobx";
import React from "react";

import Effect from "app/models/Effect";
import type {Position} from "app/models/Matrix";

import GameStore from "app/stores/GameStore";

import Matrix from "app/components/Matrix/Matrix";

import "./PreviewEffect.scss";

export default class PreviewEffect extends Effect {
    constructor() {
        super();

        autorun(() => {
            const newPosition: Position = GameStore.matrix.landingGridPosition(GameStore.piece.grid, GameStore.piecePosition);
            this.updatePosition(newPosition);
        });
    }

    @action updatePosition(position: Position) {
        this.position = position;
    }

    render(blockSize: number) {
        return (
            <div className="PreviewEffect">
                <Matrix matrix={GameStore.piece} blockSize={blockSize}/>
            </div>
        )
    }
}
