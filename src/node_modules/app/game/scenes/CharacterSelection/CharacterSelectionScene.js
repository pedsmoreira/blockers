import {observer} from "mobx-react";
import React from "react";

import GameStore from "app/stores/GameStore";

import Batman from "app/game/characters/Batman/Batman";
import Medusa from "app/game/characters/Medusa/Medusa";

import SceneStore from "app/stores/SceneStore";
import GameScene from "app/game/scenes/Game/GameScene";

import CharacterCard from "app/game/components/CharacterCard/CharacterCard";

import background from "app/images/background.jpg";
import music from "app/sounds/intro.mp3";

import "./CharacterSelectionScene.scss";

@observer
export default class CharacterSelectionScene extends React.PureComponent {
    static selectCharacter(character) {
        GameStore.selectCharacter(character);

        GameStore.selectStage(character.stage);
        SceneStore.setScene(<GameScene/>)
    }

    componentWillMount() {
        SceneStore.setBackground(background);
        SceneStore.setMusic(music);
    }

    render() {
        const characters = [Batman, Medusa].map((character: Function) => {
            return <CharacterCard key={character.slug} character={character}
                                  callback={() => this.constructor.selectCharacter(character)}/>
        });

        return (
            <div className="CharacterSelectionScene">
                <div className="container">
                    <header>
                        <h1>Choose your Character</h1>
                    </header>

                    <div className="CharacterSelectionScene-cards">
                        {characters}
                    </div>
                </div>
            </div>
        )
    }
}
