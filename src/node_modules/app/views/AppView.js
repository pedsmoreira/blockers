// @flow

import {useStrict} from "mobx";
import {observer} from "mobx-react";
import React from "react";
import DevTools from "mobx-react-devtools";

import SceneStore from "app/stores/SceneStore";

import MenuScene from "app/game/scenes/Menu/MenuScene";

import MusicContainer from "app/containers/MusicContainer";
import SceneDirectorContainer from "app/containers/SceneDirectorContainer";

import Header from "app/components/Header/Header";
import Footer from "app/components/Footer/Footer";

import "./AppView.scss";

// Enable strict mode
useStrict(true);

// Set initial Scene
SceneStore.setScene(<MenuScene/>);

@observer
export default class AppView extends React.Component {
    render() {
        const style = {
            backgroundImage: [
                'linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, .75))',
                SceneStore.background ? `url("${SceneStore.background}")` : null
            ].join(', ')
        };

        return (
            <div className='AppView' style={style}>
                <MusicContainer/>

                <Header/>
                <SceneDirectorContainer/>
                <Footer/>

                <DevTools/>
            </div>
        )
    }
}
